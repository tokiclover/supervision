#
# $Header:  /etc/sv/php-fpm/OPTIONS                      Exp $
# $License: 2-clause/new/simplified BSD                  Exp $
#

#
# XXX: to use a differrent version just setup name variable and add an new
# OPTIONS.$name file to refelct the new instance or php version.
# The default is to use php-5.6
#
#name=php-fpm5.6

SVC_BEFORE="apache2 httpd lighttpd nginx"
SVC_USE=logger
SVC_NEED=net
SVC_CONFIGFILE=/etc/php/fpm-php5.6/php-fpm.conf
SVC_REQ_FILES="/etc/php/fpm-php5.6/php.ini"
SVC_CMD=/usr/bin/php-fpm5.6
#
# XXX: do not expand in case an instance or different php is used
#
SVC_OPTS='--nodaemonize --php-ini ${SVC_CONFIGFILE%/*}/php.ini --fpm-config ${SVC_CONFIGFILE}'
PIDFILE=/var/run/php-fpm.pid

start_pre()
{
	#
	# XXX: check SVC_CONFIGFILE for user:group and socket path
	#
	checkpath -qd -m 770 -o nobody:nobody /var/run/php-fpm
}
reload()
{
	svc_sig HUP || kill -HUP $(cat ${PIDFILE})
}

#
# vim:fenc=utf-8:ft=sv:ci:pi:sts=0:sw=4:ts=4:
#
