#!/bin/sh
#
# $Header:  /etc/runit/3                                 Exp $
# $License: 2-clause/new/simplified BSD                  Exp $
#

exec >/dev/console 2>&1

:	${PATH=/bin:/sbin:/usr/bin:/usr/sbin}
:	${INIT_STAGE=/lib/sv/sh/init-stage}
:	${SV_RUNDIR:=/run/service}

if [ -x /etc/runit/reboot ]; then
	RUNLEVEL=0 ACTION=reboot   MSG='System reboot'
else
	RUNLEVEL=6 ACTION=shutdown MSG='System shutdown'
fi
if [ -x ${INIT_STAGE} ]; then
	exec env - ACTION="${ACTION}" RUNLEVEL="${RUNLEVEL}" ${INIT_STAGE} -3
fi

sv -w 10 force-shutdown ${SV_RUNDIR}/*
RUNLEVEL="${LEVEL}" rc "${ACTION}"

#
# vim:fenc=utf-8:ft=sh:ci:pi:sts=0:sw=4:ts=4:
#
