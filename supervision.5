.\"
.\" CopyLeft (c) 2015-6 tokiclover <tokiclover@gmail.com>
.\"
.\" Distributed under the terms of the 2-clause BSD License
.\"
.pc
.TH SUPERVISION 5 "2016-12-08" "0.12.5" "Supervision Framework"
.SH NAME
Supervision \- Supervision Framework init-system and service-manager
.SH DESCRIPTION
Supervision package aims to provide and easy, simple and efficient
service-manager and init-system build to function with a supervision suite.
Though the init-system part can be bypassed altogether by using only stage-2 and
thus benefit the easy to use the service-management framework for supervision.
.SS SUPERVISION
Supervision aims to provide an easy and efficient way to supervision;
Deamontools[-encore], Runit and S6 backends are actually supported.
(Supervision-)services use, by default, a single \fIsv/\fBSERVICE\fI/OPTIONS\R
file and \fI./{finish,run}\fR symlinked to \fIsv/.opt/cmd\fR.
The same goes for the log directory.
.I Envdir
variant with a global \fIsv/.env\fR and local \fIsv/SERVICE/env\fR is also supported.
.SS RUNSCRIPT
It also support runscript services usable in stage-[0123] that can be used
to finely set up and boot a full system.
The same environment variables are used, minus that, almost only dependencies
and extra commands are usable in this context.
(Runscript-)services use a single executable file with an optional configuration
file \fIsv.conf.d/\fBSERVICE\fR
which uses the same formating and syntax as improved common
.B rc
script file (e.g. OpenRC.) Meaning that, only functions and dependency are
defined in the files. This is also true for supervision services.
.SH OVERVIEW
.SS CONFIGURATION
Global configuration can be done with
.I sv.conf
file. Do note that, this will affect every service.
Local, per service, configuration is done with
.I OPTIONS
files. See
.B OPTIONS
sub-section for more info.
.SS LSB COMMANDS
Standard LSB
.I {start,stop,status}
along with
.I {reload,restart,zap}
and
.I {add,desc,cgroup_remove_service,scan}
extra commands are supported.
Supervision-services also support
.I {new,remove}
command to create a new service with a template.
.I reload
command has special meaning for supervision services in that, if no
.I reload
command definition is found and the supervision suite support a
.I reload
command, so
.B runit
so to speak, this
.I reload
command will be used instead.
And then, if not, a
.B SIGHUP
would be sent the supervisor and then a
.I start
command would be issued.
The other command remove the service from
.B SV_RUNDIR
(running /service/ directory.)
And the last to remove Control Group PIDs hierarchy.
`@SBINDIR@/rs [OPTIONS] SERVICE COMMAND [ARGUMENTS]' can be used for any service
type and efficiency; or the following for a particular service type.
Some commands, like
.I {add,del}
require a stage level
`-(0|1|2|3)' to get the appropriate result.
.TP
.B SUPERVISION
And
.B `@SYSCONFDIR@/sv/SERVICE/run [OPTS] COMMAND [ARGS]'
can be used instead for supervision services.
.TP
.B RUNSCRIPT
And
.B `@SYSCONFDIR@/sv/SERVICE COMMAND [ARGS]'
can be used instead for runscript services.
.SS SERVICE INSTANCE
.TP
.B SUPERVISION
Service supporting many instances can be written in a short manner
like a virtual service backend with specific \fIOPTIONS.\fBINSTANCE\fR
file, e.g.
.I syslog
with
.I socklog
backend (suporting extra
.I {inet,ucspi,unix}
instances),
instead of duplicating unecessary directory and symbolic links;
And then a single extra
.B INSTANCE->SERVICE
symbolic link would suffice.
See also
.I getty
for an example of multi-providers/instances with
.I only
a single symlink and a single \fIsv/\fBSERVICE\fI/OPTIONS\fR
file.
.TP
.B RUNSCRIPT
Similarly, runscript service instances use a symlink to the service with an extra
\fIsv.conf.d/\fBINSTANCE\fR configuration file if any.
See
.I networkfs
(instance of
.I localfs
service) or
.I tmpfiles.setup
(instance of
.I tmpfiles.dev
service) for actual examples for this.
.SS VIRTUAL SERVICE
Making virtual services is easy as to use
.B SVC_PROVIDE
environment variable, for example,
.I SVC_PROVIDE=dev
for
.I mdev
or
.I udev
service. This will ensure that a specific provider included in an init-stage
will be started instead of
.I any
provider. This solution is more robust in specifying a particular provider for
an init-stage. Choosing a particular provider for a particular service (in the
network sense) is made by adding a particular provider in the init-stage, like
for example, adding
.I dhcp
in init-stage-1 for
.I net
(just issue a `rs -1 dhcp add' and be done with it.)
.TP
.B SUPERVISION
Another scheme is to use a single directory for multiple providers like,
for example,
.I dns
,
.I ntp
or
.I syslog
or even
.I dhcp
service. This is the old legacy way to make a virtual service. And this manner
is welcomed to enforce a
.I single
instance mode for a particular
.I service
(in the network sense.) So, a
.I single
.B NTP
and
.B DNS
daemon will be started no matter what happen.
This variant is made by using a single directory and a specific
.B OPTIONS.PROVIDER
file for service that should be in a single instance mode, like
.B syslog
(see
.I syslog
service.)
.B WARNING:
Explicite usage of
.B name=COMMAND_NAME
and
.B SVC_CMD=COMMAND_NAME
in \fIsv/\fBSERVICE\fI/OPTIONS\fR configuration
file is required to get the expected behavior.

Now, this simple scheme may not suffice with complicated service like
.I udev
, which would start any number of daemons as included instaces. This might not
be what is expected. So, use the previous manner by defining
.B SVC_PROVIDE
environment variable.
.TP
.B RUNSCRIPT
Similarly, runscript services use the first way of making a virtual service
described above, namely, by setting
.I SVC_PROVIDE
environment variable. The first variant cannot be used here because runscript
services are execuable files instead of directories.
.SS SERVICE USAGE
Full
.I {after,before,need,use}
service dependencies is supported. See
.B DEPENDENCIES
and
.B INIT-STAGE
for more info.
.TP
.B SUPERVISION
If service dependencies matter, usage of Runit/S6 is recommanded.
Cold system boot should be fine because of priority level scheduling which start
services in parallele depending on the service dependencies; so, services with
dependencies would reliably wait enough if necessary, or else,
.I SV_TRY
(supervision) limit configuration setting would restart (failed) services.
.TP
.B RUNSCRIPT
Runscript service are used to finely bring up and shutdown a system.
Yet, runscript services do not support launching daemons because this is left
for supervision services. Launching daemons should be manually handled.
.SH OPTIONS
.SS ENVIRONMENT
The following environment variables are supported.
The default environment variables are defined in
.I sv/.opt/SVC_OPTIONS
and can be defined in service \fIOPTIONS\fR file(s).
.TP
.B SUPERVISION
Supervision services use \fIsv/\fBSERVICE\fI/OPTIONS\fR
file or provider file(s) to define environment variables if necessary.
This where the command and command line options are defined alond with
shell functions for service setup and clean up if necessary.
.TP
.B RUNSCRIPT
Runscript services use \fIsv/\fBSERVICE\fR script to define shell functions and
a default environment; and  \fIsv.conf.d/\fBSERVICE\fR configuration file to
define extra services dependencies and other environment variables and service
options.
.TP
.B USAGE
Now runscript service can be used to start daemons which cannot be kept in the
foreground even with
.B fghack
usage. See
.I {nrpe,nginx}
services for practical examples. Just keep in mind that either
.B SVC_PIDFILE
should be defined and/or enable
.B SV_CGROUP
for that matter.
.B SVC_PIDFILE
definition is enough to stop the service and
.B SV_CGROUP
will clean up every children in the Control Cgroup. This latter usage is more
than necessary when the daemon does not have option to print the PID in a file.
Those two points are all there is to stopping daemons started as
.I runscript
service instead of
.I supervision
one. There is no hack to try to find the PID of a daemon!
This ability was just added to avoid defining
.I ad infinitum
.B {start,stop}()
shell function. Just define at least
.B SVC_{CMD,OPTS}
and be done with it.
.RE
.TS
tab (@);
l lx.
\fBCOLOR\fR@T{
Enable or disable colored output (default to \fIYES\fR)
T}
\fBSVC_CONFIGFILE\fR@T{
Service configuration file
T}
\fBSVC_COMMANDS\fR@T{
Extra service commands
T}
\fBSVC_STARTED_COMMANDS\fR@T{
Extra started service commands
T}
\fBSVC_STOPPED_COMMANDS\fR@T{
Extra stopped service commands
T}
\fBSVC_DEBUG=Yes\fR@T{
To enable debug mode
T}
\fBSVC_DEPS=No\fR@T{
To disable (or to force for stop phase) dependencies
T}
\fBSVC_NAME\fR@T{
Service name (default to SERVICE directory)
T}
\fBSVC_AFTER\fR@T{
Start service after dependency services
T}
\fBSVC_BEFORE\fR@T{
Start service before dependency services
T}
\fBSVC_USE\fR@T{
Try-to-Start use dependency services if any
T}
\fBSVC_NEED\fR@T{
Require need dependency services to be started
T}
\fBSVC_PROVIDE\fR@T{
Provide this virtual service for dependency use
T}
\fBSVC_REQ_FILES\fR@T{
Service required file-s
T}
\fBSVC_CMD\fR@T{
Command name (default to SERVICE directory)
T}
\fBSVC_OPTS\fR@T{
Command arguments
T}
\fBSVC_USER\fR@T{
\fBUSER\fR to use to run commands
T}
\fBSVC_GROUP\fR@T{
\fBGROUP\fR to use to run commands
T}
\fBSVC_PIDFILE\fR@T{
PID file of (supervised) service (internaly overrided)
T}
\fBRC_OPTS=Yes\fR@T{
To enable support for OpenRC configuration files
T}
.TE

The following environment variables are only relevant for
.B SUPERVISION
services; many of which have default sane values (see
.I SVC_OPTIONS
for the default values before overriding any.)
Unless runscript services is used to start daemons that cannot be kept in the
foreground, defining the following variables are useless for runscript services.
.RE
.TS
tab (@);
l lx.
\fBENV_DIR=Yes\fR@T{
To enable \fIenvdir\fR support mode (or \fIenvuidgid\fR when \fBSVC_{GROUP,USER}\fR are defined)
T}
\fBENV_CMD\fR@T{
Envdir command (default to [\fIenvdir SV_RUNDIR/.env\fR][\fIenvdir SV_RUNDIR/\fBSERVICE\fI/env\fR])
T}
\fBENV_OPTS\fR@T{
Envdir arguments
T}
\fBPRE_CMD\fR@T{
Pre-launch command
T}
\fBPRE_OPTS\fR@T{
Pre-launch arguments
T}
\fBFIN_CMD\fR@T{
Finish command
T}
\fBFIN_OPTS\fR@T{
Finish arguments
T}
\fBLOG_CMD\fR@T{
Log (run) command
T}
\fBLOG_OPTS\fR@T{
Log (run) arguments
T}
\fBLOG_FIN_CMD\fR@T{
Log (finish) command
T}
\fBLOG_FIN_OPTS\fR@T{
Log (finish) arguments
T}
\fBLOG_PRE_CMD\fR@T{
Log Pre-launch command
T}
\fBLOG_PRE_OPTS\fR@T{
Log Pre-launch arguments
T}
\fBLOG_SIZE\fR@T{
File size limit for log rotation (default to \fI2048000\fR)
T}
\fBLOG_STATE\fR@T{
Status prefix to use to set up \fI'+^${LOG_STAT} =${SVC_LOGDIR}/status'\fR option
T}
\fBLOG_PREFIX\fR@T{
Prefix to use for logging (default to \fI${SVC_NAME}\fR)
T}
\fBLOG_PROC\fR@T{
Processor command to use for log rotation (default to \fIgzip -nq\fR)
T}
\fBLOG_ARGS\fR@T{
Base options to use for logging (default to \fI"s${LOG_SIZE} !'${LOG_PROC}'"\fR)
T}
\fBLOGDIR\fR@T{
Default log directory (default to \fI/var/log\fR)
T}
\fBSVC_LOGDIR\fR@T{
Default service log directory (default to \fI${LOGDIR}/${SVC_NAME}\fR)
T}
\fBSVC_WAIT_DOWN\fR@T{
Delay to wait the command to be down (default 10 seconds)
T}
\fBSVC_WAIT_UP\fR@T{
Delay to wait the command to be up (default 10 seconds)
T}
.TE
.SS FUNCTIONS
Extra service commands along with supported functions are defined as shell functions.
.B WARNING:
A few functions starting with 
.I {svc,rs}_
prefix are used for internal usage;
and thus are reserved for futur usage;
use `sv.vim' file type plugin or look at it to get a list of functions/keywords.
(\fIenv_{del,svc,run}\fR shell functions are also reserved for internal usage.
\fI{checkpath,{fstab,mount}info,service,waitfile}\fR have shell fnctions of the same name to
bypass shell path look up for efficiency.)
And then, a few functions name have special meaning; read the following for more
information.
.TS
tab (@);
l lx.
\fBreload\fR@T{
Reload function for ./run (supervision) or runscript service
T}
\fBstart_pre\fR@T{
Setup function for ./run (supervision) or start() (runscript)
T}
\fBstart_post\fR@T{
Clean up function for ./run (supervision) or start() (runscript)
T}
\fBstop_pre\fR@T{
Setup function for ./finish (supervision) or stop() (runscript)
T}
\fBstop_post\fR@T{
Clean up function for ./finish (supervision) or stop() (runscript)
T}
.TE

.TP
.B SUPERVISION
Those two shell functions can be used for logdir setup and clean up for supervision
services; there are no meaning for runscript services and thus are not supported.
.TS
tab (@);
l lx.
\fBlog_start_pre\fR@T{
Setup function for (log) ./run
T}
\fBlog_stop_post\fR@T{
Clean up function for (log) ./finish
T}
.TE

See
.B sv/.opt/SVC_OPTIONS
for the default and
.B OPTIONS
file for services like
.I acpid,
.I cron,
.I cgred,
.I dbus,
.I sshd
for practical examples.
.TP
.B RUNSCRIPT
Standard
.I {restart,start,stop}
along with
.I {start,stop}_{pre,post}
(set/clean up) functions are supported.
.TS
tab (@);
l lx.
\fBstart\fR@T{
Start shell function (preceded and followed by a set/clean up functions if any.)
T}
\fBstop\fR@T{
Same as above for stop shell function.
T}
\fBrestart\fR@T{
Custom stop/start command if any (default is \fI{stop,start}\R)
T}
.TE
.SS BUILTINS
.TS
tab (@);
l lx.
\fBinfo [MESSAGE]\fR@T{
Print notice message to standard output
T}
\fBwarn [MESSAGE]\fR@T{
Print warning message to standard output
T}
\fBerror [MESSAGE]\fR@T{
Print error message to standard error
T}
\fBbegin [MESSAGE]\fR@T{
Print beginning message to standard output
T}
\fBend [MESSAGE]\fR@T{
Print ending message to standard output
T}
\fBfstabinfo [OPTIONS] MOUNTPOINTS\fR@T{
Get information of fstab(5) entries
T}
\fBmountinfo [OPTIONS] MOUNTPOINTS\fR@T{
Get information of current mountpoints
T}
\fBdevice_info [-a|--all] DEVICES\fR@T{
Probe /proc/{devices,misc} device info
T}
\fBSOURCE [-e|-d] FILES\fR@T{
Source wrapper (with file existance check)
T}
\fBenv_svc VARS\fR@T{
Save persistent environment variables
T}
\fBenv_del VARS\fR@T{
Remove persistent environment variables
T}
\fBsvc_down -(d|r)\fR@T{
Set up a service as down (SUPERVISION)
T}
\fBsvc_mark -(S|d|f|s|u)\fR@T{
Set defined service status
T}
\fBsvc_state -(a|d|e|f|s)\fR@T{
Get defined service status
T}
\fBsvc_del\fR@T{
Remove service from runlevel directory
T}
\fBsvc_remove\fR@T{
Clean up service from running directory
T}
\fBsvc_sig -SIGNAL\fR@T{
Send a particular SIGNAL to the daemon service
T}
\fBsvc_wait [-E] TIMEOUT FILE\fR@T{
Wait a service file to appear or disapear--with \fI-E\fR option
T}
\fBsvc_zap\fR@T{
Remove temporary service files
T}
\fBwaitfile [-m] [-E] TIMEOUT FILE\fR@T{
Wait for file to appear or disapear--with \fI-E\fR option
T}
.TE
.TP
.B SUPERVISION
.TS
tab (@);
l lx.
\fBenv_sv\fR@T{
Save (global) persistent environment variables
T}
\fBsvc_cmd\fR@T{
Run a supervision service command
T}
.TE
.TP
.B RUNSCRIPT
.TS
tab (@);
l lx.
\fBenv_rs\fR@T{
Save (global) persistent environment variables
T}
\fBrs_cmd\fR@T{
Run a runscript service command
T}
.TE
.SS DEPENDENCIES
Standard
.I {after,before,need,use}
service dependencies is supported.
Still, supervision scan model has the major advantage of parallel
service management making it simple and cheap to implement but
.I before
dependency type.
And then,
.B RS_PARALLEL
configuration setting can be enabled to start everything
in parallel. This choice is practicable if before style dependency is not used;
because after counterpart can be used instead. And this note is only valid when
starting a particular service individually, not when starting a stage level.

Mixed service dependencies is also supported. However, this is usable
only in stage-[12] because of
.B svscan
ties to stage-2, and, once stage-3
is reached, system shutdown is triggered; so, no dependency handling can be
done there without a running
.B svscan.
Actually,
.B svscan
if executed as early as possible in stage-1 after starting
runscript services in stage-0 to fully bring up an initialized and usable system.
.SS INIT-STAGE
Superivision is organized in three distinct init-stage;
one for system boot; second for system running state;
third for system shutdown.
An extended stage-0 (system initialization) is also supported.
This is where
.I {dev{,fs},sysfs}
et al. runscript services should live in.
Booting with
.B mdev
as device manager work as expected even with
.B device-mapper
and
.B dmcrypt
compiled with udev support. And then,
.B stage-0 (sysinit)
is very short before a supervised device manager is started. So, having, say,
.B udev
in stage-1 would still work as expected.

.B WARNING:
.I udev
cannot be added to stage-0, nor can the
.I dev
virtual service used for this case, because the service won't start untill
stage-1.
.SS RUNLEVELS
.I {sysinit,boot,default,nonetwork,shutdown,reboot,single,nonetwork}
run levels are supported.
Extra services that should be started in
.I single
run levels should be added into
.I SV_SVCDIR/.single
like
.I sulogin
service in
.I single
level. And there is no command to do this... so, manual addition is required
hre. It's just a matter of adding symbolic links like
`ln -s @SYSCONFDIR@/sv/sulogin @SYSCONFDIR@/etc/sv/.single'.
In fact,
.B sysinit
runlevel is stage-0;
.B boot
runlevel is tage-1;
.B default
runlevel is stage-2;
.B {nonetwork,single}
is only a modified
.B boot
runlevel without network services. So, in practice,
.B {nonetwork,single}
replace
.B boot
runlevel to be able to repair a system.
See \fBrs\gR(8) for more inforation about sysvinit compatible runlevels.
.SH CONTROL GROUPS RESOURCE MANAGEMENT
.SS OVERVIEW
Supervision Framework support CGroup. CGroup support is autodected on
start up on Linux. Just enable kernel CGroup support to benefit CGroup resource
management. Or else, forcibly disable in
.B sv.conf
by setting
.B SV_CGROUP=No.
Set
.B CGROUP_INHERIT=Yes
to inherit other CGroups, and/or
.B CGROUP_CLEANUP=Yes
to clean up child processes of a \fIgroup\fR or supervised process (in ./finish.)

Global
.B (SVC_OPTIONS/sv.conf)
and Local
.B (OPTIONS)
Resource Management Settings is supported e.g.
.RB CGROUP_CPU='cpu.shares\ 256'.
Multi-value of a parameter is supported along with sets of multi-parameter-value.
.SS ENVIRONMENT
See the following table and Linux Documentation for more info on Resource Controllers.
.TS
tab (@);
l lx.
\fBCGROUP_BLKIO\fR@T{
Use Block IO Controller to manage resource for service(s)
T}
\fBCGROUP_CPU\fR@T{
Use CPU Controller to manage resource for service(s)
T}
\fBCGROUP_CPUACCT\fR@T{
Use CPU Accounting Controller to manage resource for service(s)
T}
\fBCGROUP_CPUSET\fR@T{
Use CPU Sets Controller to manage resource for service(s)
T}
\fBCGROUP_DEVICES\fR@T{
Use Device Whitlist Controller to manage resource for service(s)
T}
\fBCGROUP_MEMORY\fR@T{
Use Memory Controller to manage resource for service(s)
T}
\fBCGROUP_NET_CLS\fR@T{
Use Network Classifier to manage resource for service(s)
T}
\fBCGROUP_NET_PRIO\fR@T{
Use Network Priority to manage resource for service(s)
T}
.TE
.SS SERVICE
CGRED (CGroup Rules Engine Daemon) service is another alternative to CGroup
with finely grained rules and automatic PIDs classification.
However, libcgroup should be installed beforehand.

Something like the following can be used to put supervisor processes in CGroup:
.nf
--[cgconfig.conf]--
group supervisor {
  "name=supervision" {
  }
}
--[EOF]--
--[cgrules.conf]--
*:runsv  supervision   supervisor/
--[EOF]--
.fi
Replace
.IR runsv
with
.IR supervise
for daemontools[-encore] or
.IR s6-supervise
for S6.
See cgconfig.conf(5) and enable cgred service.

This is only necessary if not using the bundled Init-Stage-2 which have CGroup
support: child process (supervisor) will naturally inherit supervision CGroup.
.SH FILES
.SS @SBINDIR@
.TP
.I rs
Multi-purpose binary to run either stage-[0123] or service command, e.g.
`rs -1 zramfs add' to add
.B zramfs
service to stage-1 (boot run level); `rs acpid start' or `rs -2 stage' to start
daemons and default services (default run level.)
.SS @SYSCONFDIR@
.TP
.I sv.conf
Supervision global configuration file
.TP
.I sv.conf.d/\ (SV_CFGDIR)
Runscript local configuration files directory
.TP
.I sv/\ (SV_SVCDIR)
See RS_SVCDIR/.stage-{0,1,2,3} for active services.
Use `rs -{0|1|2|3} SERVICE add` to add a particular service to a particular
stage or runlevel.
.B Init-stage-0
is ready to use;
.B init-stage-1
can be modified to include services like
.B {zramfs,zfs,zpool,unionfs,device-mapper,raid}
and so on; likewise for
.B init-stage-2.
.TP
.B RUNSCRIPT SERVICES (included services)
.RB [\| clock \|]\ \c
.RB [\| console \|]\ \c
.RB [\| devfs \|]\ \c
.RB [\| dmesg \|]\ \c
.RB [\| hostname \|]\ \c
.RB [\| kmod \|]\ \c
.RB [\| kmod-static-nodes \|]\ \c
.RB [\| localfs \|]\ \c
.RB [\| loopback \|]\ \c
.RB [\| miscfs \|]\ \c
.RB [\| mtab \|]\ \c
.RB [\| networkfs \|]\ \c
.RB [\| nginx \|]\ \c
.RB [\| nrpe \|]\ \c
.RB [\| procfs \|]\ \c
.RB [\| rootfs \|]\ \c
.RB [\| swaps \|]\ \c
.RB [\| swapfiles \|]\ \c
.RB [\| sysctl \|]\ \c
.RB [\| sysfs \|]\ \c
.RB [\| tmpdirs \|]\ \c
.RB [\| tmpfiles.dev \|]\ \c
.RB [\| tmpfiles.setup \|]\ \c
.RB [\| zfs \|]\ \c
.RB [\| zfs-share \|]\ \c
.RB [\| zpool \|]\ \c
.RB (LINUX:[\| device-mapper \|]\ \c
.RB [\| dmcrypt \|]\ \c
.RB [\| ipset \|]\ \c
.RB [\| ip[6]tables \|]\ \c
.RB [\| lvm \|]\ \c
.RB [\| mdev \|]\ \c
.RB [\| raid \|]\ \c
.RB [\| unionfs \|]\ \c
.RB [\| zramfs \|])
.TP
.B SUPERVISION SERVICES (included service)
.RB [\| apache2 \|]\ \c
.RB [\| atd \|]\ \c
.RB [\| cron \|]\ \c
.RB [\| cupsd \|]\ \c
.RB [\| cups-browsed \|]\ \c
.RB [\| dhcp \|]\ \c
.RB [\| dhcpd \|]\ \c
.RB [\| dhcrelay \|]\ \c
.RB [\| dbus \|]\ \c
.RB [\| dns \|]\ \c
.RB [\| getty \|]\ \c
.RB [\| git-daemon \|]\ \c
.RB [\| gpm \|]\ \c
.RB [\| hostapd \|]\ \c
.RB [\| inetd \|]\ \c
.RB [\| initctl \|]\ \c
.RB [\| libvirtd \|]\ \c
.RB [\| httpd \|]\ \c
.RB [\| mysql \|]\ \c
.RB [\| nagios \|]\ \c
.RB [\| npcd \|]\ \c
.RB [\| ntp \|]\ \c
.RB [\| pcscd \|]\ \c
.RB [\| php-fpm \|]\ \c
.RB [\| postgresql \|]\ \c
.RB [\| rrdcached \|]\ \c
.RB [\| rsync-daemon \|]\ \c
.RB [\| saned \|]\ \c
.RB [\| sshd \|]\ \c
.RB [\| spawn-fcgi.nginx \|]\ \c
.RB [\| snmpd \|]\ \c
.RB [\| snmptrapd \|]\ \c
.RB [\| sulogin \|]\ \c
.RB [\| syslog \|]\ \c
.RB [\| virtlockd \|]\ \c
.RB [\| virtlogd \|]\ \c
.RB [\| wpa_supplicant \|]\ \c
.RB [\| xdm \|]\ \c
.RB [\| zed \|]\ \c
.RB (LINUX:\ [\| acpid \|]\ \c
.RB [\| cgred \|]\ \c
.RB [\| udev \|]\ \c
.RB [\| udev-monitor \|])
.TP
.I .lib/
Symbolic link to
.B SV_LIBDIR
.TP
.I runit/{1,2,3,ctraltdel}
Init-Stage-{1,2,3} files to handle system boot/shutdown and supervisor; and
C-ALT-DEL signal handler for shutdown and reboot.
.TP
.I s6/{init-stage-1,crash,finish}
Init-stage-{1,2,3} files to handle system boot, reboot and shutdown and
supervisor crashes.
.TP
.I {conf,init}.d/supervision
Supervision init script service for OpenRC
.SS SV_SVCDIR/.opt/
.TP
.I cmd
Default sv/SERVICE/{,log/}{finish,run} commands
.TP
.I SVC_BACKEND
Specific supervision (backend) environment
.TP
.I SVC_OPTIONS
Default service (OPTIONS) environment
.SS @RUNDIR@/sv/ (SV_RUNDIR)
Default run time '/service/' directory
.SS @LIBDIR@/sv/\ (SV_LIBDIR)
SUPERVISION library directory
.SS SV_LIBDIR/bin/
.TP
.I checkpath
Simple and cheap checkpath/mktemp binary
.TP
.I fstabinfo
Simple and cheap fstab(5) utility
.TP
.I mountinfo
Simple and cheap mountpoints utility
.TP
.I waitfile
Simple and cheap wait file utility (alternative to \fIsvc_wait\fR shell function)
.TP
.B SYMLINKS\ (backend binary symlinks)
.RB \| envdir \|\ \c
.RB \| envuidgid \|\ \c
.RB \| fghack \|\ \c
.RB \| pgrphack \|\ \c
.RB \| setlock \|\ \c
.RB \| setuidgid \|\ \c
.RB \| softlimit \|
.SS SV_LIBDIR/sbin/
.TP
.I service
Compatiblity SystemV symlink so that `servce SERVICE COMMAND' would work as
expected on SystemV system. This symlink may copied to
.I /sbin
system directory or the add $LIBDIR/bin:$LIBDIR/sbin to PATH environment variable.
.TP
.I sv-config
`sv/.lib/sbin/sv-config [--log] SERVICE new' to create a new supervision service;
and `sv-config -S runit' to set up specific supervision backend (supervision suite).
.TP
.I sv-shutdown
Simple utility to handle system halt or reboot. It could be symlinked to
.B /sbin/{halt,shutdown,reboot}
to get SystemV interface... minor no compatible command line options.
.SS SV_LIBDIR/sh/
.TP
.I dep
Simple script to list dependencies
.TP
.I cgroup-release-agent
CGroup Release Agent script
.TP
.I init-stage
Init-stage-[123] handler for supervision
.TP
.I cgroup-functions
CGroup Functions/helper library
.TP
.I functions
Generic Functions/Helpers library
.TP
.I runscript
Run-script helper utility
.TP
.I runscript-functions
Run-script Functions/helpers library
.TP
.I supervision-functions
Supervision Functions/Helpers library
.TP
.I tmpfiles
Tmpfiles utility for SystemD tmpfiles.d compatiblity
.SH "SEE ALSO"
.BR rs (8),
.BR (shell:)
.BR sh (1p)
.BR (deamontools[-encore]:)
.BR \%svc (8),
.BR \%multilog (8),
.BR \%svscan (8),
.BR (runit:)
.BR \%sv (8),
.BR \%svlogd (8),
.BR \%runsvdir (8),
.BR (s6:)
.BR \%s6-svc (8),
.BR \%s6-log (8),
.BR \%s6-svscan (8),
.SH AUTHORS
tokiclover <tokiclover@supervision.project>
.\"
.\" vim:fenc=utf-8:ft=groff:ci:pi:sts=2:sw=2:ts=2:expandtab:
.\"
